libraby(tidyverse)
library(tidyverse)
library(readr)
gapminder_1997 <- read_csv("~/桌�\235�/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
library(tidyverse)
library(tidyverse)
library(readr)
gapminder_1997 <- read_csv("~/桌�\235�/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
library(readr)
gapminder_1997 <- read_csv("~/桌�\235�/un-report/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
library(readr)
gapminder_1997 <- read_csv("~/桌�\235�/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
library(readr)
gapminder_1997 <- read_csv("~/桌�\235�/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
gapminder_1997
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
library(tidyverse
library(tidyverse)
library(tidyverse)
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/gapminder_1997.csv")
?read_csv
gapminder_1997 <- read.csv(file = "gapminder_1997.csv")
View(gapminder_1997)
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
View(gapminder_1997)
ggplot(data = gapminder_1997)
library(ggplot2)
ggplot(data = gapminder_1997)
library(ggplot)
library(ggplot2)
ggplot(data = gapminder_1997) + aes(x=gdpPercap)
ggplot(data = gapminder_1997) + aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
labs(y = 'lifeExp')
ggplot(data = gapminder_1997) + aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
labs(y = 'lifeExp')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?')
#Plotting in R
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?') +
aes(color = continent)
aes(color = continent) +
scale_color_brewer(palette = 'Set1')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?') +
aes(color = continent) +
scale_color_brewer(palette = 'Set1')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?') +
aes(color = continent) +
scale_color_brewer(palette = 'Set2')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?') +
aes(color = continent) +
scale_color_brewer(palette = 'Set2')+
aes(size=poo/1000000) +
labs(size='Population(in millions'))
ggplot(data = gapminder_1997) +
aes(x=gdpPercap) +
labs(x='GDP Per Capita') +
aes(y = lifeExp) +
labs(y ='Life Expectancy')+
geom_point()+
labs(title = 'Do people in wealthy countries live longer?') +
aes(color = continent) +
scale_color_brewer(palette = 'Set2')+
aes(size=pop/1000000) +
labs(size='Population(in millions')
ggplot(data = gapminder_1997) +
aes(x=gdpPercap , y = lifeExp, color = continent, size = pop/1000000) +
labs(x='GDP Per Capita', y ='Life Expectancy',
title = 'Do people in wealthy countries live longer?',
size='Population(in millions') +
geom_point()+
scale_color_brewer(palette = 'Set2')
# larger gapminder dataset
gapminder_data <- read_csv(file = 'gapminder_data.csv')
library(tidyverse)
# larger gapminder dataset
gapminder_data = read_csv(file = 'gapminder_data.csv')
gapminder_data <- read.csv("~/桌面/un-report/un-report/gapminder_data.csv")
View(gapminder_data)
# larger gapminder dataset
gapminder_data = read_csv(file = 'gapminder_data.csv')
# larger gapminder dataset
gapminder_data = read_csv(file = 'gapminder_data.csv')
gapminder_data <- read_csv(file = 'gapminder_data.csv')
# larger gapminder dataset
gapminder_data <- read_csv(file='gapminder_data.csv')
gapminder_data <- read.csv("~/桌面/un-report/un-report/gapminder_data.csv")
View(gapminder_data)
# larger gapminder dataset
gapminder_data <- read_csv(file='gapminder_data.csv')
gapminder_data <- read.csv("~/桌面/un-report/un-report/gapminder_data.csv")
View(gapminder_data)
# larger gapminder dataset
gapminder_data <- read_csv(file='gapminder_data.csv')
library(tidyverse)
# larger gapminder dataset
gapminder_data <- read_csv(file='gapminder_data.csv')
library(readr)
gapminder_data <- read_csv("~/桌�\235�/un-report/un-report/gapminder_data.csv")
View(gapminder_data)
# larger gapminder dataset
gapminder_data <- read_csv(file='gapminder_data.csv')
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
library(tidyverse)
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
gapminder_1997 <- read.csv("~/桌面/un-report/un-report/un-report/gapminder_1997.csv")
View(gapminder_1997)
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
gapminder_1997= read_csv(file = 'gapminder_1997.csv')
library(tidyverse)
gapminder_data <- read_csv('data/gapminder_data.csv')
gapminder_data
gapminder_data <- read_csv('data/gapminder_data.csv')
gapminder_data
?summarise()
gapminder_data %>%
summarise(average=mean(lifeExp))
summarise(gapminder_data, average = mean(lifeExp))
#look for the most recent year
?max()
gapminder_data %>%
summarise(recent_year=max(year))
#select only 2007 data
?filter()
gapminder_data %>%
filter(year ==2007) %>%
summarise(average=mean(lifeExp))
#
gapminder_data %>%
filter(year ==1952) %>%
summarise(average_gdp =mean(gdpPercap))
# what is life exp for each year
gapminder_data %>%
group_by(year) %>%
summarise(min = min(lifeExp), max =max(lifeExp))
#add a column for total GDP - pop * per capita GDP
head(gapminder_data)
totalGDP <- gapminder_data %>%
mutate(TotalGDP = pop*gdpPercap)
# filter = choose rows; select = choose columns
gapminder_data %>%
select(pop, year)
#how to drop columns
gapminder_data %>%
select(-continent)
# what is tidy data?
gapminder_data_wide <- gapminder_data %>%
select(country, continent, year, lifeExp) %>%
pivot_wider(names_from = year, values_from = lifeExp)
head(gapminder_data_wide)
head(gapminder_data)
# gapminder was tidy, so how do we clean untidy data?
read_csv('data/co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series, 'Emission(thousand metric tons of carbon dioxide)' = 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emission (thousand metric tons of carbon dioxide)' = 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emission (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value)
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value) %>%
count(year)
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value) %>%
filter(year == 2005) %<%
select(-year)
read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value) %>%
filter(year == 2005) %>%
select(-year)
head(gapminder_data)
co2_emissions < - read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value) %>%
filter(year == 2005) %>%
select(-year)
# gapminder was tidy, so how do we clean untidy data?
co2_emissions < - read_csv('co2-un-data.csv', skip=2, col_names = c('region', 'country', 'year', 'series',
'value', 'footnotes', 'source')) %>%
select(country, year, series, value) %>%
mutate(series = recode(series,
'Emissions (thousand metric tons of carbon dioxide)'
= 'total',
'Emissions per capita (metric tons of carbon dioxide)' ='per_capita'))%>%
pivot_wider(names_from = series, values_from=value) %>%
filter(year == 2005) %>%
select(-year)
co2_emissions <- read_csv("data/co2-un-data.csv", skip=2,
col_names = c("region", "country", "year",
"series", "value", "footnotes",
"source")) %>%
select(country, year, series, value) %>%
mutate(series=
recode(series,
"Emissions (thousand metric tons of carbon dioxide)"
= "total",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita")) %>%
pivot_wider(names_from=series, values_from=value) %>%
filter(year == 2005) %>%
select(-year)
co2_emissions <- read_csv("co2-un-data.csv", skip=2,
col_names = c("region", "country", "year",
"series", "value", "footnotes",
"source")) %>%
select(country, year, series, value) %>%
mutate(series=
recode(series,
"Emissions (thousand metric tons of carbon dioxide)"
= "total",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita")) %>%
pivot_wider(names_from=series, values_from=value) %>%
filter(year == 2005) %>%
select(-year)
co2-un-data <- read_csv("co2-un-data.csv")
co2_data <- read_csv("co2-un-data.csv")
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=1)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=2)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=1)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=1)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv")
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=1)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=2)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=1)
View(co2_data)
View(co2_data)
co2_data <- read_csv("co2-un-data.csv", skip=2)
View(co2_data)
View(co2_data)
View(co2_emissions)
View(co2_data)
View(co2_emissions)
View(co2_emissions)
gapminder_data_2007 <- read_csv('data/gapminder_data.csv') %>%
filter(year == 2007 & continent =='Americas') %>%
select(-year, -continent)
View(gapminder_data_2007)
## Merge together our two datasets
# Only merge common countries
inner_join(gapminder_data_2007, co2_emissions)
?inner_join()
inner_join(gapminder_data_2007, co2_emissions, by = "country")
#find what is missing from join
anti_join(gapminder_data_2007, co2_emissions, by = "country")
View(co2_emissions)
#fix co2 table to match better
?mutate
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
View(co2_emissions_fixed)
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
?mutate
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
#fix co2 table to match better
co2_emissions
co2_emissions_fixed < - co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
co2_emissions_fixed <- co2_emissions %>%
mutate(country=recode(country,
'Bolivia (Plurin. State of)' =
'Bolivia',
'United States of America' =
'United States',
'Venezuela (Boliv. Rep. of)' =
'Venezuela'))
View(co2_emissions_fixed)
View(co2_emissions_fixed)
# How would we recode Puerto Rico?
gapminder_co2 <- inner_join(gapminder_data_2007, co2_emissions_fixed, by ='country')
anti_join(gapminder_data_2007, co2_emissions_fixed, by ='country')
View(gapminder_co2)
View(gapminder_co2)
ggplot(gapminder_co2, aes(x=gdpPercap, y =per_capita))+
geom_point()
ggplot(gapminder_co2, aes(x=gdpPercap, y =per_capita))+
geom_point()+
geom_smooth(method='lm')
# what is relationship between GDP and amount of CO2
ggplot(gapminder_co2, aes(x=log10(gdpPercap), y =per_capita))+
geom_point()+
geom_smooth(method='lm')
# what is relationship between GDP and amount of CO2
ggplot(gapminder_co2, aes(x=gdpPercap, y =per_capita))+
geom_point()+
geom_smooth(method='lm')
# what is relationship between GDP and amount of CO2
ggplot(gapminder_co2, aes(x=gdpPercap, y =per_capita))+
geom_point()+
geom_smooth(method='lm') +
labs(x='GDP (per capita)',
y='CO2 emitted (per captita)',
title = "There is a strong association between a nation 's GDP and CO2 production")
ggsave('./GDPvsCO2.jpg', width = 6, height =4)
head(gapminder_co2)
gapminder_co2 %>%
?if_else
head(gapminder_co2)
gapminder_co2 %>%
mutate(region = if_else(country == 'Canada' | country = 'United States' | country == 'Mexico', 'north', 'south'))
gapminder_co2 %>%
mutate(region = if_else(country == 'Canada' | country =='United States' | country == 'Mexico', 'north', 'south'))
gapminder_co2 %>%
mutate(region = if_else(country == 'Canada' | country =='United States' | country == 'Mexico', 'north', 'south')) %>%
group_by(region) %>%
summarise(sumCO2 = sum(total), sumpop = sum(pop))
?write_csv
write_csv(gapminder_co2, './data/GDP_vs_co2_data.csv')
